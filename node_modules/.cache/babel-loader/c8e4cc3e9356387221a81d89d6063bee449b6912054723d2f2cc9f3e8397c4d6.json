{"ast":null,"code":"import React,{useState,useEffect}from'react';import{collection,addDoc,onSnapshot,doc,updateDoc,deleteDoc}from'firebase/firestore';import{onAuthStateChanged,signOut}from'firebase/auth';import{useNavigate}from'react-router-dom';import{db,auth}from'./firebase';import'./App.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const navigate=useNavigate();const[user,setUser]=useState(null);const[tracks,setTracks]=useState([]);const[trackSearch,setTrackSearch]=useState('');const[newTrackName,setNewTrackName]=useState('');const[selectedTrack,setSelectedTrack]=useState(null);const[sessions,setSessions]=useState([]);const[sessionName,setSessionName]=useState('');const[selectedSession,setSelectedSession]=useState(null);const[isModalOpen,setIsModalOpen]=useState(false);const[runData,setRunData]=useState({bestLap:'',avgLap:'',fiveMinuteStint:'',tires:'',favorite:false,notes:''});const[showDeleteTrackConfirm,setShowDeleteTrackConfirm]=useState(null);const[showDeleteSessionConfirm,setShowDeleteSessionConfirm]=useState(null);const[showDeleteRunConfirm,setShowDeleteRunConfirm]=useState(null);const[showTutorial,setShowTutorial]=useState(false);const[locationStatus,setLocationStatus]=useState('');const[showRetryLocation,setShowRetryLocation]=useState(false);useEffect(()=>{const unsubscribe=onAuthStateChanged(auth,currentUser=>{if(currentUser){setUser(currentUser);console.log('User authenticated:',currentUser.email);setShowTutorial(true);}else{setUser(null);console.log('No user authenticated, redirecting to login...');navigate('/login');}});return()=>unsubscribe();},[navigate]);useEffect(()=>{if(!user)return;const tracksRef=collection(db,`users/${user.uid}/tracks`);const unsubscribe=onSnapshot(tracksRef,snapshot=>{const trackData=snapshot.docs.map(doc=>({id:doc.id,...doc.data()}));setTracks(trackData);console.log('Tracks fetched:',trackData);},error=>{console.error('Firestore snapshot error:',error);});return()=>unsubscribe();},[user]);useEffect(()=>{if(!user||!selectedTrack){setSessions([]);setSelectedSession(null);return;}const sessionsRef=collection(db,`users/${user.uid}/tracks/${selectedTrack.id}/sessions`);const unsubscribe=onSnapshot(sessionsRef,snapshot=>{const sessionData=snapshot.docs.map(doc=>{const data=doc.data();return{id:doc.id,date:data.date||new Date().toISOString(),name:data.name,runs:data.runs||[],weather:data.weather||{temp:0,condition:'Unknown'},notes:data.notes};});setSessions(sessionData);console.log('Sessions fetched:',sessionData);setSelectedSession(prev=>prev?sessionData.find(s=>s.id===prev.id)||null:null);},error=>{console.error('Firestore snapshot error:',error);});return()=>unsubscribe();},[user,selectedTrack]);const handleLogout=()=>{signOut(auth).then(()=>{console.log('Logged out successfully');navigate('/login');}).catch(error=>{console.error('Logout error:',error);});};const addTrack=async()=>{if(!user||!newTrackName)return;try{const track={name:newTrackName};await addDoc(collection(db,`users/${user.uid}/tracks`),track);setNewTrackName('');console.log('Track added:',newTrackName);}catch(error){console.error('Error adding track:',error);}};const deleteTrack=async trackId=>{if(!user)return;try{const trackRef=doc(db,`users/${user.uid}/tracks`,trackId);await deleteDoc(trackRef);setShowDeleteTrackConfirm(null);if((selectedTrack===null||selectedTrack===void 0?void 0:selectedTrack.id)===trackId)setSelectedTrack(null);console.log('Track deleted:',trackId);}catch(error){console.error('Error deleting track:',error);}};const fetchWeather=async()=>{setLocationStatus('Requesting location...');console.log('fetchWeather: Starting geolocation request at',new Date().toISOString());const fetchLocation=()=>{return new Promise((resolve,reject)=>{if(!navigator.geolocation){reject(new Error('Geolocation is not supported by this browser.'));return;}let attempts=0;const maxAttempts=3;const retryDelay=2000;// 2 seconds between retries\nconst tryGetPosition=()=>{attempts++;console.log(`fetchWeather: Attempt ${attempts} of ${maxAttempts}`);navigator.geolocation.getCurrentPosition(pos=>{console.log('fetchWeather: Geolocation success:',{lat:pos.coords.latitude,lon:pos.coords.longitude,accuracy:pos.coords.accuracy,timestamp:new Date().toISOString()});resolve(pos);},error=>{console.error('fetchWeather: Geolocation error:',{code:error.code,message:error.message,attempt:attempts,timestamp:new Date().toISOString()});let errorMessage='Unable to fetch location.';switch(error.code){case error.PERMISSION_DENIED:errorMessage='Location permission denied. Please enable location access for this site in your browser settings.';break;case error.POSITION_UNAVAILABLE:errorMessage='Location unavailable. Ensure Location Services are enabled.';break;case error.TIMEOUT:errorMessage='Location request timed out.';break;}if(attempts<maxAttempts&&error.code!==error.PERMISSION_DENIED){console.log(`fetchWeather: Retrying in ${retryDelay}ms...`);setTimeout(tryGetPosition,retryDelay);}else{reject(new Error(errorMessage));}},{enableHighAccuracy:false,// Lower accuracy might work better on some devices\ntimeout:10000,// 10 seconds timeout per attempt\nmaximumAge:0// No cached position\n});};// Check permission status first\nif(navigator.permissions){navigator.permissions.query({name:'geolocation'}).then(result=>{console.log('fetchWeather: Permission status:',result.state);if(result.state==='denied'){reject(new Error('Location permission denied. Please enable it in your browser settings.'));}else{tryGetPosition();}}).catch(err=>{console.error('fetchWeather: Permission check failed:',err);tryGetPosition();// Proceed anyway\n});}else{tryGetPosition();// Older browsers without permissions API\n}});};try{var _data$properties$time;const position=await fetchLocation();const{latitude,longitude}=position.coords;console.log(`fetchWeather: Location fetched: lat=${latitude}, lon=${longitude}`);setLocationStatus(`Location fetched: ${latitude.toFixed(4)}, ${longitude.toFixed(4)}`);console.log('fetchWeather: Fetching weather data from api.met.no');const response=await fetch(`https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=${latitude}&lon=${longitude}`,{headers:{'User-Agent':'RC-Testing-Analyzer/1.0 (your-email@example.com)'}});if(!response.ok){console.error('fetchWeather: Weather API failed:',response.status,response.statusText);throw new Error(`Weather API failed with status: ${response.status}`);}const data=await response.json();console.log('fetchWeather: Weather API response:',data);const current=data.properties.timeseries[0].data.instant.details;const temp=current.air_temperature;const conditionSymbol=((_data$properties$time=data.properties.timeseries[0].data.next_1_hours)===null||_data$properties$time===void 0?void 0:_data$properties$time.summary.symbol_code)||'unknown';const condition=conditionSymbol.split('_')[0];setLocationStatus('Weather data retrieved successfully');return{temp,condition};}catch(error){console.error('fetchWeather: Failed:',error);setLocationStatus(error instanceof Error?error.message:'Unknown error fetching location.');setShowRetryLocation(true);// Fallback to default coordinates\nconst fallbackLat=59.9245;// Lørenskog, Norway\nconst fallbackLon=10.9540;console.log(`fetchWeather: Using fallback coordinates: lat=${fallbackLat}, lon=${fallbackLon}`);try{var _data$properties$time2;const response=await fetch(`https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=${fallbackLat}&lon=${fallbackLon}`,{headers:{'User-Agent':'RC-Testing-Analyzer/1.0 (your-email@example.com)'}});if(!response.ok){throw new Error(`Fallback Weather API failed with status: ${response.status}`);}const data=await response.json();const current=data.properties.timeseries[0].data.instant.details;const temp=current.air_temperature;const conditionSymbol=((_data$properties$time2=data.properties.timeseries[0].data.next_1_hours)===null||_data$properties$time2===void 0?void 0:_data$properties$time2.summary.symbol_code)||'unknown';const condition=conditionSymbol.split('_')[0];setLocationStatus('Using fallback weather data (Lørenskog)');return{temp,condition};}catch(fallbackError){console.error('fetchWeather: Fallback failed:',fallbackError);setLocationStatus('Failed to retrieve weather data');return{temp:0,condition:'Unknown'};}}};const createSession=async()=>{if(!user||!selectedTrack)return;console.log('createSession: Starting with name:',sessionName);try{setLocationStatus('');setShowRetryLocation(false);const weather=await fetchWeather();console.log('createSession: Weather data:',weather);const session={date:new Date().toISOString(),runs:[],weather};if(sessionName)session.name=sessionName;console.log('createSession: Session object:',session);const docRef=await addDoc(collection(db,`users/${user.uid}/tracks/${selectedTrack.id}/sessions`),session);console.log('createSession: Session created with ID:',docRef.id);setSessionName('');setLocationStatus('Session created successfully');}catch(error){console.error('createSession: Error:',error);setLocationStatus('Failed to create session');alert('Failed to create session. Check console for details.');}};const retryLocation=async()=>{console.log('retryLocation: Attempting to retry geolocation');setShowRetryLocation(false);await createSession();};const useDefaultWeather=()=>{console.log('useDefaultWeather: Proceeding with default weather');if(!user||!selectedTrack){setLocationStatus('Cannot create session: No track selected');return;}setShowRetryLocation(false);setLocationStatus('Using default weather data');const session={date:new Date().toISOString(),runs:[],weather:{temp:0,condition:'Unknown'}};if(sessionName)session.name=sessionName;addDoc(collection(db,`users/${user.uid}/tracks/${selectedTrack.id}/sessions`),session).then(docRef=>{console.log('useDefaultWeather: Session created with ID:',docRef.id);setSessionName('');setLocationStatus('Session created with default weather');}).catch(error=>{console.error('useDefaultWeather: Error:',error);setLocationStatus('Failed to create session with default weather');alert('Failed to create session with default weather');});};const deleteSession=async sessionId=>{if(!user||!selectedTrack)return;try{const sessionRef=doc(db,`users/${user.uid}/tracks/${selectedTrack.id}/sessions`,sessionId);await deleteDoc(sessionRef);setShowDeleteSessionConfirm(null);if((selectedSession===null||selectedSession===void 0?void 0:selectedSession.id)===sessionId)setSelectedSession(null);console.log('Session deleted:',sessionId);}catch(error){console.error('Error deleting session:',error);}};const openAddRunModal=()=>{if(!selectedSession)return;setRunData({bestLap:'',avgLap:'',fiveMinuteStint:'',tires:'',favorite:false,notes:''});setIsModalOpen(true);};const addRun=async()=>{if(!user||!selectedSession||!selectedTrack)return;console.log('Adding run to session:',selectedSession.id,'with data:',runData);try{const newRun={bestLap:parseFloat(runData.bestLap)||0,avgLap:parseFloat(runData.avgLap)||0};if(runData.fiveMinuteStint)newRun.fiveMinuteStint=runData.fiveMinuteStint;if(runData.notes)newRun.notes=runData.notes;if(runData.tires){newRun.setup={tires:runData.tires,favorite:runData.favorite};}const sessionRef=doc(db,`users/${user.uid}/tracks/${selectedTrack.id}/sessions`,selectedSession.id);const updatedRuns=[...selectedSession.runs,newRun];await updateDoc(sessionRef,{runs:updatedRuns});console.log('Run added successfully to session:',selectedSession.id);setRunData({bestLap:'',avgLap:'',fiveMinuteStint:'',tires:'',favorite:false,notes:''});setIsModalOpen(false);}catch(error){console.error('Error adding run:',error);alert('Failed to add run. Check console for details.');}};const deleteRun=async runIndex=>{if(!user||!selectedSession||!selectedTrack)return;try{const updatedRuns=selectedSession.runs.filter((_,index)=>index!==runIndex);const sessionRef=doc(db,`users/${user.uid}/tracks/${selectedTrack.id}/sessions`,selectedSession.id);await updateDoc(sessionRef,{runs:updatedRuns});setShowDeleteRunConfirm(null);console.log('Run deleted at index:',runIndex);}catch(error){console.error('Error deleting run:',error);}};const filteredTracks=tracks.filter(track=>track.name.toLowerCase().includes(trackSearch.toLowerCase()));if(!user){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-dark-navy flex items-center justify-center text-gray-blue\",children:\"Redirecting to login...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-dark-navy to-deep-blue text-white flex flex-col\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"p-4 sm:p-6 shadow-lg flex flex-col sm:flex-row justify-between items-center bg-deep-blue/90 backdrop-blur-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center sm:text-left mb-4 sm:mb-0\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl sm:text-3xl font-bold tracking-tight\",children:\"RC Testing Analyzer\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-blue\",children:selectedTrack?`Sessions for ${selectedTrack.name}`:'Manage your tracks and sessions'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-4\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"text-light-pink hover:text-bright-pink text-sm sm:text-base\",children:[\"Logout (\",user.email,\")\"]})})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"flex-1 p-4 sm:p-6\",children:[!selectedTrack?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newTrackName,onChange:e=>setNewTrackName(e.target.value),placeholder:\"New Track Name\",className:\"flex-1 p-2 rounded bg-dark-blue text-white focus:ring-2 focus:ring-light-pink outline-none\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addTrack,className:\"bg-light-pink hover:bg-bright-pink text-dark-blue font-semibold py-2 px-4 rounded transition-colors\",children:\"Add Track\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:trackSearch,onChange:e=>setTrackSearch(e.target.value),placeholder:\"Search Tracks\",className:\"w-full p-2 rounded bg-dark-blue text-white focus:ring-2 focus:ring-light-pink outline-none\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\",children:filteredTracks.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-blue col-span-full text-center\",children:\"No tracks found. Add one to start!\"}):filteredTracks.map(track=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg bg-dark-blue/80 shadow-md hover:shadow-lg transition-shadow\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold truncate\",children:track.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedTrack(track),className:\"text-light-pink hover:text-bright-pink text-sm\",children:\"View Sessions\"}),showDeleteTrackConfirm===track.id?/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteTrack(track.id),className:\"text-red-400 hover:text-red-300 text-sm\",children:\"Yes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDeleteTrackConfirm(null),className:\"text-gray-blue hover:text-white text-sm\",children:\"No\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDeleteTrackConfirm(track.id),className:\"text-red-400 hover:text-red-300 text-sm\",children:\"Delete\"})]})]},track.id))})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-3 mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedTrack(null),className:\"bg-deep-blue hover:bg-slate-blue text-white font-semibold py-2 px-4 rounded transition-colors\",children:\"Back to Tracks\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:sessionName,onChange:e=>setSessionName(e.target.value),placeholder:\"Session Name\",className:\"flex-1 p-2 rounded bg-dark-blue text-white focus:ring-2 focus:ring-light-pink outline-none\"}),/*#__PURE__*/_jsx(\"button\",{onClick:createSession,className:\"bg-light-pink hover:bg-bright-pink text-dark-blue font-semibold py-2 px-4 rounded transition-colors\",children:\"+ New Session\"})]}),locationStatus&&/*#__PURE__*/_jsxs(\"p\",{className:`text-sm mb-4 ${locationStatus.includes('failed')||locationStatus.includes('denied')||locationStatus.includes('unavailable')?'text-red-400':'text-gray-blue'}`,children:[locationStatus,showRetryLocation&&/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:retryLocation,className:\"ml-2 text-light-pink hover:text-bright-pink underline\",children:\"Retry\"}),/*#__PURE__*/_jsx(\"button\",{onClick:useDefaultWeather,className:\"ml-2 text-light-pink hover:text-bright-pink underline\",children:\"Use Default\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\",children:sessions.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-blue col-span-full text-center\",children:\"No sessions yet. Add one to start!\"}):sessions.map(session=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg bg-dark-blue/80 shadow-md hover:shadow-lg transition-shadow\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold truncate\",children:session.name||new Date(session.date).toLocaleDateString()}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-blue\",children:[\"Runs: \",session.runs.length]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-blue\",children:[\"Weather: \",session.weather.condition,\", \",session.weather.temp,\"\\xB0C\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mt-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-blue text-sm\",children:[session.runs.filter(run=>{var _run$setup;return(_run$setup=run.setup)===null||_run$setup===void 0?void 0:_run$setup.favorite;}).length,\" Favorite(s)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 flex-wrap\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedSession(session),className:\"text-light-pink hover:text-bright-pink text-sm\",children:\"View Runs\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedSession(session);openAddRunModal();},className:\"text-light-pink hover:text-bright-pink text-sm\",children:\"Add Run\"}),showDeleteSessionConfirm===session.id?/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteSession(session.id),className:\"text-red-400 hover:text-red-300 text-sm\",children:\"Yes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDeleteSessionConfirm(null),className:\"text-gray-blue hover:text-white text-sm\",children:\"No\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDeleteSessionConfirm(session.id),className:\"text-red-400 hover:text-red-300 text-sm\",children:\"Delete\"})]})]})]},session.id))})]}),isModalOpen&&selectedSession&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/60 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-dark-blue rounded-lg p-6 max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold mb-4\",children:[\"Add Run to \",selectedSession.name||new Date(selectedSession.date).toLocaleDateString()]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-light-pink/20 pt-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-2\",children:\"New Run\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-blue text-sm mb-1\",children:\"Best Lap (s)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:runData.bestLap,onChange:e=>setRunData({...runData,bestLap:e.target.value}),className:\"w-full p-3 rounded bg-dark-blue text-white border border-light-pink/20 focus:ring-2 focus:ring-light-pink outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-blue text-sm mb-1\",children:\"Average Lap\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:runData.avgLap,onChange:e=>setRunData({...runData,avgLap:e.target.value}),className:\"w-full p-3 rounded bg-dark-blue text-white border border-light-pink/20 focus:ring-2 focus:ring-light-pink outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-blue text-sm mb-1\",children:\"5-Min Run (e.g., 23:5:04.2)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:runData.fiveMinuteStint,onChange:e=>{let value=e.target.value.replace(/\\D/g,\"\");if(value.length>7)value=value.slice(0,7);if(value.length>=7){value=`${value.slice(0,2)}:${value.slice(2,3)}:${value.slice(3,5)}.${value.slice(5,6)}`;}else if(value.length>=6){value=`${value.slice(0,2)}:${value.slice(2,3)}:${value.slice(3,5)}.${value.slice(5)}`;}else if(value.length>=5){value=`${value.slice(0,2)}:${value.slice(2,3)}:${value.slice(3,5)}`;}else if(value.length>=3){value=`${value.slice(0,2)}:${value.slice(2)}`;}setRunData({...runData,fiveMinuteStint:value});},placeholder:\"23:5:04.2\",className:\"w-full p-3 rounded bg-dark-blue text-white border border-light-pink/20 focus:ring-2 focus:ring-light-pink outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-blue text-sm mb-1\",children:\"Tires\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:runData.tires,onChange:e=>setRunData({...runData,tires:e.target.value}),className:\"w-full p-3 rounded bg-dark-blue text-white border border-light-pink/20 focus:ring-2 focus:ring-light-pink outline-none\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-blue text-sm mb-1\",children:\"Notes\"}),/*#__PURE__*/_jsx(\"textarea\",{value:runData.notes,onChange:e=>setRunData({...runData,notes:e.target.value}),className:\"w-full p-3 rounded bg-dark-blue text-white border border-light-pink/20 focus:ring-2 focus:ring-light-pink outline-none\",rows:4})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:runData.favorite,onChange:e=>setRunData({...runData,favorite:e.target.checked}),className:\"text-light-pink focus:ring-light-pink\"}),/*#__PURE__*/_jsx(\"label\",{className:\"text-gray-blue text-sm\",children:\"Favorite Setup\"})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex justify-end gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:addRun,className:\"bg-light-pink hover:bg-bright-pink text-dark-blue font-semibold py-2 px-4 rounded transition-colors\",children:\"Add Run\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsModalOpen(false),className:\"bg-deep-blue hover:bg-slate-blue text-white font-semibold py-2 px-4 rounded transition-colors\",children:\"Close\"})]})]})}),selectedSession&&!isModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/60 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-2xl bg-dark-blue rounded-lg p-6 max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold mb-4\",children:[\"Runs for \",selectedSession.name||new Date(selectedSession.date).toLocaleDateString()]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:selectedSession.runs.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-blue text-center\",children:\"No runs recorded yet.\"}):selectedSession.runs.map((run,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-slate-blue/20 rounded flex flex-col sm:flex-row justify-between items-start gap-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-blue text-sm\",children:[\"Run \",index+1]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-white text-sm\",children:[\"Best Lap: \",run.bestLap,\"s\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-white text-sm\",children:[\"Avg Lap: \",run.avgLap,\"s\"]}),run.fiveMinuteStint&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-white text-sm\",children:[\"5-Min Stint: \",run.fiveMinuteStint]}),run.setup&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-white text-sm\",children:[\"Tires: \",run.setup.tires,run.setup.favorite&&/*#__PURE__*/_jsx(\"span\",{className:\"text-light-pink\",children:\" \\u2605\"})]}),run.notes&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-blue italic text-sm\",children:[\"Notes: \",run.notes]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2 mt-2 sm:mt-0\",children:showDeleteRunConfirm===index?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteRun(index),className:\"text-red-400 hover:text-red-300 text-sm\",children:\"Yes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDeleteRunConfirm(null),className:\"text-gray-blue hover:text-white text-sm\",children:\"No\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDeleteRunConfirm(index),className:\"text-red-400 hover:text-red-300 text-sm\",children:\"Delete\"})})]},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex justify-end gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:openAddRunModal,className:\"bg-light-pink hover:bg-bright-pink text-dark-blue font-semibold py-2 px-4 rounded transition-colors\",children:\"Add New Run\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedSession(null),className:\"bg-deep-blue hover:bg-slate-blue text-white font-semibold py-2 px-4 rounded transition-colors\",children:\"Close\"})]})]})}),showTutorial&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/60 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-dark-blue rounded-lg p-6 shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-white mb-4\",children:\"Welcome to RC Testing Analyzer!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-blue mb-4\",children:\"Here\\u2019s a quick guide to get you started:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside text-white space-y-2\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Create a track by entering a name and clicking \\\"Add Track\\\".\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Select a track to view or add sessions.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Add a session with a name and weather data will auto-fetch.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Click \\\"View Runs\\\" on a session to see runs, or \\\"Add Run\\\" to log new ones.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Use the \\\"Logout\\\" button when you\\u2019re done.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTutorial(false),className:\"bg-light-pink hover:bg-bright-pink text-dark-blue font-semibold py-2 px-4 rounded transition-colors\",children:\"Got It!\"})})]})})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","collection","addDoc","onSnapshot","doc","updateDoc","deleteDoc","onAuthStateChanged","signOut","useNavigate","db","auth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","navigate","user","setUser","tracks","setTracks","trackSearch","setTrackSearch","newTrackName","setNewTrackName","selectedTrack","setSelectedTrack","sessions","setSessions","sessionName","setSessionName","selectedSession","setSelectedSession","isModalOpen","setIsModalOpen","runData","setRunData","bestLap","avgLap","fiveMinuteStint","tires","favorite","notes","showDeleteTrackConfirm","setShowDeleteTrackConfirm","showDeleteSessionConfirm","setShowDeleteSessionConfirm","showDeleteRunConfirm","setShowDeleteRunConfirm","showTutorial","setShowTutorial","locationStatus","setLocationStatus","showRetryLocation","setShowRetryLocation","unsubscribe","currentUser","console","log","email","tracksRef","uid","snapshot","trackData","docs","map","id","data","error","sessionsRef","sessionData","date","Date","toISOString","name","runs","weather","temp","condition","prev","find","s","handleLogout","then","catch","addTrack","track","deleteTrack","trackId","trackRef","fetchWeather","fetchLocation","Promise","resolve","reject","navigator","geolocation","Error","attempts","maxAttempts","retryDelay","tryGetPosition","getCurrentPosition","pos","lat","coords","latitude","lon","longitude","accuracy","timestamp","code","message","attempt","errorMessage","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","setTimeout","enableHighAccuracy","timeout","maximumAge","permissions","query","result","state","err","_data$properties$time","position","toFixed","response","fetch","headers","ok","status","statusText","json","current","properties","timeseries","instant","details","air_temperature","conditionSymbol","next_1_hours","summary","symbol_code","split","fallbackLat","fallbackLon","_data$properties$time2","fallbackError","createSession","session","docRef","alert","retryLocation","useDefaultWeather","deleteSession","sessionId","sessionRef","openAddRunModal","addRun","newRun","parseFloat","setup","updatedRuns","deleteRun","runIndex","filter","_","index","filteredTracks","toLowerCase","includes","className","children","onClick","type","value","onChange","e","target","placeholder","length","toLocaleDateString","run","_run$setup","replace","slice","rows","checked"],"sources":["C:/Users/albin/rc-tracker/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { collection, addDoc, onSnapshot, doc, updateDoc, deleteDoc } from 'firebase/firestore';\r\nimport { onAuthStateChanged, signOut } from 'firebase/auth';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { db, auth } from './firebase';\r\nimport './App.css';\r\n\r\ninterface Track {\r\n  id: string;\r\n  name: string;\r\n  location?: { lat: number; lon: number };\r\n}\r\n\r\ninterface Run {\r\n  bestLap: number;\r\n  avgLap: number;\r\n  fiveMinuteStint?: string;\r\n  notes?: string;\r\n  setup?: { tires: string; favorite: boolean };\r\n}\r\n\r\ninterface Session {\r\n  id: string;\r\n  date: string;\r\n  name?: string;\r\n  runs: Run[];\r\n  weather: { temp: number; condition: string };\r\n  notes?: string;\r\n}\r\n\r\nfunction App() {\r\n  const navigate = useNavigate();\r\n  const [user, setUser] = useState<any>(null);\r\n  const [tracks, setTracks] = useState<Track[]>([]);\r\n  const [trackSearch, setTrackSearch] = useState('');\r\n  const [newTrackName, setNewTrackName] = useState('');\r\n  const [selectedTrack, setSelectedTrack] = useState<Track | null>(null);\r\n  const [sessions, setSessions] = useState<Session[]>([]);\r\n  const [sessionName, setSessionName] = useState('');\r\n  const [selectedSession, setSelectedSession] = useState<Session | null>(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [runData, setRunData] = useState({ bestLap: '', avgLap: '', fiveMinuteStint: '', tires: '', favorite: false, notes: '' });\r\n  const [showDeleteTrackConfirm, setShowDeleteTrackConfirm] = useState<string | null>(null);\r\n  const [showDeleteSessionConfirm, setShowDeleteSessionConfirm] = useState<string | null>(null);\r\n  const [showDeleteRunConfirm, setShowDeleteRunConfirm] = useState<number | null>(null);\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [locationStatus, setLocationStatus] = useState<string>('');\r\n  const [showRetryLocation, setShowRetryLocation] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\r\n      if (currentUser) {\r\n        setUser(currentUser);\r\n        console.log('User authenticated:', currentUser.email);\r\n        setShowTutorial(true);\r\n      } else {\r\n        setUser(null);\r\n        console.log('No user authenticated, redirecting to login...');\r\n        navigate('/login');\r\n      }\r\n    });\r\n    return () => unsubscribe();\r\n  }, [navigate]);\r\n\r\n  useEffect(() => {\r\n    if (!user) return;\r\n\r\n    const tracksRef = collection(db, `users/${user.uid}/tracks`);\r\n    const unsubscribe = onSnapshot(tracksRef, (snapshot) => {\r\n      const trackData = snapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      })) as Track[];\r\n      setTracks(trackData);\r\n      console.log('Tracks fetched:', trackData);\r\n    }, (error) => {\r\n      console.error('Firestore snapshot error:', error);\r\n    });\r\n    return () => unsubscribe();\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    if (!user || !selectedTrack) {\r\n      setSessions([]);\r\n      setSelectedSession(null);\r\n      return;\r\n    }\r\n\r\n    const sessionsRef = collection(db, `users/${user.uid}/tracks/${selectedTrack.id}/sessions`);\r\n    const unsubscribe = onSnapshot(sessionsRef, (snapshot) => {\r\n      const sessionData = snapshot.docs.map((doc) => {\r\n        const data = doc.data();\r\n        return {\r\n          id: doc.id,\r\n          date: data.date || new Date().toISOString(),\r\n          name: data.name,\r\n          runs: data.runs || [],\r\n          weather: data.weather || { temp: 0, condition: 'Unknown' },\r\n          notes: data.notes,\r\n        } as Session;\r\n      });\r\n      setSessions(sessionData);\r\n      console.log('Sessions fetched:', sessionData);\r\n      setSelectedSession((prev) => prev ? sessionData.find((s) => s.id === prev.id) || null : null);\r\n    }, (error) => {\r\n      console.error('Firestore snapshot error:', error);\r\n    });\r\n    return () => unsubscribe();\r\n  }, [user, selectedTrack]);\r\n\r\n  const handleLogout = () => {\r\n    signOut(auth)\r\n      .then(() => {\r\n        console.log('Logged out successfully');\r\n        navigate('/login');\r\n      })\r\n      .catch((error) => {\r\n        console.error('Logout error:', error);\r\n      });\r\n  };\r\n\r\n  const addTrack = async () => {\r\n    if (!user || !newTrackName) return;\r\n    try {\r\n      const track = { name: newTrackName };\r\n      await addDoc(collection(db, `users/${user.uid}/tracks`), track);\r\n      setNewTrackName('');\r\n      console.log('Track added:', newTrackName);\r\n    } catch (error) {\r\n      console.error('Error adding track:', error);\r\n    }\r\n  };\r\n\r\n  const deleteTrack = async (trackId: string) => {\r\n    if (!user) return;\r\n    try {\r\n      const trackRef = doc(db, `users/${user.uid}/tracks`, trackId);\r\n      await deleteDoc(trackRef);\r\n      setShowDeleteTrackConfirm(null);\r\n      if (selectedTrack?.id === trackId) setSelectedTrack(null);\r\n      console.log('Track deleted:', trackId);\r\n    } catch (error) {\r\n      console.error('Error deleting track:', error);\r\n    }\r\n  };\r\n\r\n  const fetchWeather = async (): Promise<{ temp: number; condition: string }> => {\r\n    setLocationStatus('Requesting location...');\r\n    console.log('fetchWeather: Starting geolocation request at', new Date().toISOString());\r\n  \r\n    const fetchLocation = (): Promise<GeolocationPosition> => {\r\n      return new Promise((resolve, reject) => {\r\n        if (!navigator.geolocation) {\r\n          reject(new Error('Geolocation is not supported by this browser.'));\r\n          return;\r\n        }\r\n  \r\n        let attempts = 0;\r\n        const maxAttempts = 3;\r\n        const retryDelay = 2000; // 2 seconds between retries\r\n  \r\n        const tryGetPosition = () => {\r\n          attempts++;\r\n          console.log(`fetchWeather: Attempt ${attempts} of ${maxAttempts}`);\r\n          \r\n          navigator.geolocation.getCurrentPosition(\r\n            (pos) => {\r\n              console.log('fetchWeather: Geolocation success:', {\r\n                lat: pos.coords.latitude,\r\n                lon: pos.coords.longitude,\r\n                accuracy: pos.coords.accuracy,\r\n                timestamp: new Date().toISOString(),\r\n              });\r\n              resolve(pos);\r\n            },\r\n            (error) => {\r\n              console.error('fetchWeather: Geolocation error:', {\r\n                code: error.code,\r\n                message: error.message,\r\n                attempt: attempts,\r\n                timestamp: new Date().toISOString(),\r\n              });\r\n  \r\n              let errorMessage = 'Unable to fetch location.';\r\n              switch (error.code) {\r\n                case error.PERMISSION_DENIED:\r\n                  errorMessage = 'Location permission denied. Please enable location access for this site in your browser settings.';\r\n                  break;\r\n                case error.POSITION_UNAVAILABLE:\r\n                  errorMessage = 'Location unavailable. Ensure Location Services are enabled.';\r\n                  break;\r\n                case error.TIMEOUT:\r\n                  errorMessage = 'Location request timed out.';\r\n                  break;\r\n              }\r\n  \r\n              if (attempts < maxAttempts && error.code !== error.PERMISSION_DENIED) {\r\n                console.log(`fetchWeather: Retrying in ${retryDelay}ms...`);\r\n                setTimeout(tryGetPosition, retryDelay);\r\n              } else {\r\n                reject(new Error(errorMessage));\r\n              }\r\n            },\r\n            {\r\n              enableHighAccuracy: false, // Lower accuracy might work better on some devices\r\n              timeout: 10000, // 10 seconds timeout per attempt\r\n              maximumAge: 0, // No cached position\r\n            }\r\n          );\r\n        };\r\n  \r\n        // Check permission status first\r\n        if (navigator.permissions) {\r\n          navigator.permissions.query({ name: 'geolocation' }).then((result) => {\r\n            console.log('fetchWeather: Permission status:', result.state);\r\n            if (result.state === 'denied') {\r\n              reject(new Error('Location permission denied. Please enable it in your browser settings.'));\r\n            } else {\r\n              tryGetPosition();\r\n            }\r\n          }).catch((err) => {\r\n            console.error('fetchWeather: Permission check failed:', err);\r\n            tryGetPosition(); // Proceed anyway\r\n          });\r\n        } else {\r\n          tryGetPosition(); // Older browsers without permissions API\r\n        }\r\n      });\r\n    };\r\n  \r\n    try {\r\n      const position = await fetchLocation();\r\n      const { latitude, longitude } = position.coords;\r\n      console.log(`fetchWeather: Location fetched: lat=${latitude}, lon=${longitude}`);\r\n      setLocationStatus(`Location fetched: ${latitude.toFixed(4)}, ${longitude.toFixed(4)}`);\r\n  \r\n      console.log('fetchWeather: Fetching weather data from api.met.no');\r\n      const response = await fetch(\r\n        `https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=${latitude}&lon=${longitude}`,\r\n        { headers: { 'User-Agent': 'RC-Testing-Analyzer/1.0 (your-email@example.com)' } }\r\n      );\r\n  \r\n      if (!response.ok) {\r\n        console.error('fetchWeather: Weather API failed:', response.status, response.statusText);\r\n        throw new Error(`Weather API failed with status: ${response.status}`);\r\n      }\r\n  \r\n      const data = await response.json();\r\n      console.log('fetchWeather: Weather API response:', data);\r\n  \r\n      const current = data.properties.timeseries[0].data.instant.details;\r\n      const temp = current.air_temperature;\r\n      const conditionSymbol = data.properties.timeseries[0].data.next_1_hours?.summary.symbol_code || 'unknown';\r\n      const condition = conditionSymbol.split('_')[0];\r\n      setLocationStatus('Weather data retrieved successfully');\r\n      return { temp, condition };\r\n    } catch (error) {\r\n      console.error('fetchWeather: Failed:', error);\r\n      setLocationStatus(error instanceof Error ? error.message : 'Unknown error fetching location.');\r\n      setShowRetryLocation(true);\r\n  \r\n      // Fallback to default coordinates\r\n      const fallbackLat = 59.9245; // Lørenskog, Norway\r\n      const fallbackLon = 10.9540;\r\n      console.log(`fetchWeather: Using fallback coordinates: lat=${fallbackLat}, lon=${fallbackLon}`);\r\n  \r\n      try {\r\n        const response = await fetch(\r\n          `https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=${fallbackLat}&lon=${fallbackLon}`,\r\n          { headers: { 'User-Agent': 'RC-Testing-Analyzer/1.0 (your-email@example.com)' } }\r\n        );\r\n  \r\n        if (!response.ok) {\r\n          throw new Error(`Fallback Weather API failed with status: ${response.status}`);\r\n        }\r\n  \r\n        const data = await response.json();\r\n        const current = data.properties.timeseries[0].data.instant.details;\r\n        const temp = current.air_temperature;\r\n        const conditionSymbol = data.properties.timeseries[0].data.next_1_hours?.summary.symbol_code || 'unknown';\r\n        const condition = conditionSymbol.split('_')[0];\r\n        setLocationStatus('Using fallback weather data (Lørenskog)');\r\n        return { temp, condition };\r\n      } catch (fallbackError) {\r\n        console.error('fetchWeather: Fallback failed:', fallbackError);\r\n        setLocationStatus('Failed to retrieve weather data');\r\n        return { temp: 0, condition: 'Unknown' };\r\n      }\r\n    }\r\n  };\r\n\r\n  const createSession = async () => {\r\n    if (!user || !selectedTrack) return;\r\n    console.log('createSession: Starting with name:', sessionName);\r\n    try {\r\n      setLocationStatus('');\r\n      setShowRetryLocation(false);\r\n      const weather = await fetchWeather();\r\n      console.log('createSession: Weather data:', weather);\r\n      const session: Partial<Session> = {\r\n        date: new Date().toISOString(),\r\n        runs: [],\r\n        weather,\r\n      };\r\n      if (sessionName) session.name = sessionName;\r\n      console.log('createSession: Session object:', session);\r\n      const docRef = await addDoc(\r\n        collection(db, `users/${user.uid}/tracks/${selectedTrack.id}/sessions`),\r\n        session\r\n      );\r\n      console.log('createSession: Session created with ID:', docRef.id);\r\n      setSessionName('');\r\n      setLocationStatus('Session created successfully');\r\n    } catch (error) {\r\n      console.error('createSession: Error:', error);\r\n      setLocationStatus('Failed to create session');\r\n      alert('Failed to create session. Check console for details.');\r\n    }\r\n  };\r\n\r\n  const retryLocation = async () => {\r\n    console.log('retryLocation: Attempting to retry geolocation');\r\n    setShowRetryLocation(false);\r\n    await createSession();\r\n  };\r\n\r\n  const useDefaultWeather = () => {\r\n    console.log('useDefaultWeather: Proceeding with default weather');\r\n    if (!user || !selectedTrack) {\r\n      setLocationStatus('Cannot create session: No track selected');\r\n      return;\r\n    }\r\n    setShowRetryLocation(false);\r\n    setLocationStatus('Using default weather data');\r\n    const session: Partial<Session> = {\r\n      date: new Date().toISOString(),\r\n      runs: [],\r\n      weather: { temp: 0, condition: 'Unknown' },\r\n    };\r\n    if (sessionName) session.name = sessionName;\r\n    addDoc(collection(db, `users/${user.uid}/tracks/${selectedTrack.id}/sessions`), session)\r\n      .then((docRef) => {\r\n        console.log('useDefaultWeather: Session created with ID:', docRef.id);\r\n        setSessionName('');\r\n        setLocationStatus('Session created with default weather');\r\n      })\r\n      .catch((error) => {\r\n        console.error('useDefaultWeather: Error:', error);\r\n        setLocationStatus('Failed to create session with default weather');\r\n        alert('Failed to create session with default weather');\r\n      });\r\n  };\r\n\r\n  const deleteSession = async (sessionId: string) => {\r\n    if (!user || !selectedTrack) return;\r\n    try {\r\n      const sessionRef = doc(db, `users/${user.uid}/tracks/${selectedTrack.id}/sessions`, sessionId);\r\n      await deleteDoc(sessionRef);\r\n      setShowDeleteSessionConfirm(null);\r\n      if (selectedSession?.id === sessionId) setSelectedSession(null);\r\n      console.log('Session deleted:', sessionId);\r\n    } catch (error) {\r\n      console.error('Error deleting session:', error);\r\n    }\r\n  };\r\n\r\n  const openAddRunModal = () => {\r\n    if (!selectedSession) return;\r\n    setRunData({ bestLap: '', avgLap: '', fiveMinuteStint: '', tires: '', favorite: false, notes: '' });\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const addRun = async () => {\r\n    if (!user || !selectedSession || !selectedTrack) return;\r\n    console.log('Adding run to session:', selectedSession.id, 'with data:', runData);\r\n    try {\r\n      const newRun: Run = {\r\n        bestLap: parseFloat(runData.bestLap) || 0,\r\n        avgLap: parseFloat(runData.avgLap) || 0,\r\n      };\r\n      if (runData.fiveMinuteStint) newRun.fiveMinuteStint = runData.fiveMinuteStint;\r\n      if (runData.notes) newRun.notes = runData.notes;\r\n      if (runData.tires) {\r\n        newRun.setup = { tires: runData.tires, favorite: runData.favorite };\r\n      }\r\n\r\n      const sessionRef = doc(db, `users/${user.uid}/tracks/${selectedTrack.id}/sessions`, selectedSession.id);\r\n      const updatedRuns = [...selectedSession.runs, newRun];\r\n      await updateDoc(sessionRef, { runs: updatedRuns });\r\n      console.log('Run added successfully to session:', selectedSession.id);\r\n      setRunData({ bestLap: '', avgLap: '', fiveMinuteStint: '', tires: '', favorite: false, notes: '' });\r\n      setIsModalOpen(false);\r\n    } catch (error) {\r\n      console.error('Error adding run:', error);\r\n      alert('Failed to add run. Check console for details.');\r\n    }\r\n  };\r\n\r\n  const deleteRun = async (runIndex: number) => {\r\n    if (!user || !selectedSession || !selectedTrack) return;\r\n    try {\r\n      const updatedRuns = selectedSession.runs.filter((_, index) => index !== runIndex);\r\n      const sessionRef = doc(db, `users/${user.uid}/tracks/${selectedTrack.id}/sessions`, selectedSession.id);\r\n      await updateDoc(sessionRef, { runs: updatedRuns });\r\n      setShowDeleteRunConfirm(null);\r\n      console.log('Run deleted at index:', runIndex);\r\n    } catch (error) {\r\n      console.error('Error deleting run:', error);\r\n    }\r\n  };\r\n\r\n  const filteredTracks = tracks.filter((track) =>\r\n    track.name.toLowerCase().includes(trackSearch.toLowerCase())\r\n  );\r\n\r\n  if (!user) {\r\n    return <div className=\"min-h-screen bg-dark-navy flex items-center justify-center text-gray-blue\">Redirecting to login...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-dark-navy to-deep-blue text-white flex flex-col\">\r\n      <header className=\"p-4 sm:p-6 shadow-lg flex flex-col sm:flex-row justify-between items-center bg-deep-blue/90 backdrop-blur-sm\">\r\n        <div className=\"text-center sm:text-left mb-4 sm:mb-0\">\r\n          <h1 className=\"text-2xl sm:text-3xl font-bold tracking-tight\">RC Testing Analyzer</h1>\r\n          <p className=\"text-sm text-gray-blue\">\r\n            {selectedTrack ? `Sessions for ${selectedTrack.name}` : 'Manage your tracks and sessions'}\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-4\">\r\n          <button onClick={handleLogout} className=\"text-light-pink hover:text-bright-pink text-sm sm:text-base\">\r\n            Logout ({user.email})\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"flex-1 p-4 sm:p-6\">\r\n        {!selectedTrack ? (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex flex-col sm:flex-row gap-2\">\r\n              <input\r\n                type=\"text\"\r\n                value={newTrackName}\r\n                onChange={(e) => setNewTrackName(e.target.value)}\r\n                placeholder=\"New Track Name\"\r\n                className=\"flex-1 p-2 rounded bg-dark-blue text-white focus:ring-2 focus:ring-light-pink outline-none\"\r\n              />\r\n              <button onClick={addTrack} className=\"bg-light-pink hover:bg-bright-pink text-dark-blue font-semibold py-2 px-4 rounded transition-colors\">\r\n                Add Track\r\n              </button>\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              value={trackSearch}\r\n              onChange={(e) => setTrackSearch(e.target.value)}\r\n              placeholder=\"Search Tracks\"\r\n              className=\"w-full p-2 rounded bg-dark-blue text-white focus:ring-2 focus:ring-light-pink outline-none\"\r\n            />\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n              {filteredTracks.length === 0 ? (\r\n                <p className=\"text-gray-blue col-span-full text-center\">No tracks found. Add one to start!</p>\r\n              ) : (\r\n                filteredTracks.map((track) => (\r\n                  <div key={track.id} className=\"p-4 rounded-lg bg-dark-blue/80 shadow-md hover:shadow-lg transition-shadow\">\r\n                    <h2 className=\"text-lg font-semibold truncate\">{track.name}</h2>\r\n                    <div className=\"flex justify-between items-center mt-2\">\r\n                      <button\r\n                        onClick={() => setSelectedTrack(track)}\r\n                        className=\"text-light-pink hover:text-bright-pink text-sm\"\r\n                      >\r\n                        View Sessions\r\n                      </button>\r\n                      {showDeleteTrackConfirm === track.id ? (\r\n                        <div className=\"flex gap-2\">\r\n                          <button\r\n                            onClick={() => deleteTrack(track.id)}\r\n                            className=\"text-red-400 hover:text-red-300 text-sm\"\r\n                          >\r\n                            Yes\r\n                          </button>\r\n                          <button\r\n                            onClick={() => setShowDeleteTrackConfirm(null)}\r\n                            className=\"text-gray-blue hover:text-white text-sm\"\r\n                          >\r\n                            No\r\n                          </button>\r\n                        </div>\r\n                      ) : (\r\n                        <button\r\n                          onClick={() => setShowDeleteTrackConfirm(track.id)}\r\n                          className=\"text-red-400 hover:text-red-300 text-sm\"\r\n                        >\r\n                          Delete\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <div className=\"flex flex-col sm:flex-row gap-3 mb-4\">\r\n              <button\r\n                onClick={() => setSelectedTrack(null)}\r\n                className=\"bg-deep-blue hover:bg-slate-blue text-white font-semibold py-2 px-4 rounded transition-colors\"\r\n              >\r\n                Back to Tracks\r\n              </button>\r\n              <input\r\n                type=\"text\"\r\n                value={sessionName}\r\n                onChange={(e) => setSessionName(e.target.value)}\r\n                placeholder=\"Session Name\"\r\n                className=\"flex-1 p-2 rounded bg-dark-blue text-white focus:ring-2 focus:ring-light-pink outline-none\"\r\n              />\r\n              <button onClick={createSession} className=\"bg-light-pink hover:bg-bright-pink text-dark-blue font-semibold py-2 px-4 rounded transition-colors\">\r\n                + New Session\r\n              </button>\r\n            </div>\r\n            {locationStatus && (\r\n              <p className={`text-sm mb-4 ${locationStatus.includes('failed') || locationStatus.includes('denied') || locationStatus.includes('unavailable') ? 'text-red-400' : 'text-gray-blue'}`}>\r\n                {locationStatus}\r\n                {showRetryLocation && (\r\n                  <span>\r\n                    <button\r\n                      onClick={retryLocation}\r\n                      className=\"ml-2 text-light-pink hover:text-bright-pink underline\"\r\n                    >\r\n                      Retry\r\n                    </button>\r\n                    <button\r\n                      onClick={useDefaultWeather}\r\n                      className=\"ml-2 text-light-pink hover:text-bright-pink underline\"\r\n                    >\r\n                      Use Default\r\n                    </button>\r\n                  </span>\r\n                )}\r\n              </p>\r\n            )}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n              {sessions.length === 0 ? (\r\n                <p className=\"text-gray-blue col-span-full text-center\">No sessions yet. Add one to start!</p>\r\n              ) : (\r\n                sessions.map((session) => (\r\n                  <div key={session.id} className=\"p-4 rounded-lg bg-dark-blue/80 shadow-md hover:shadow-lg transition-shadow\">\r\n                    <h2 className=\"text-lg font-semibold truncate\">{session.name || new Date(session.date).toLocaleDateString()}</h2>\r\n                    <p className=\"text-sm text-gray-blue\">Runs: {session.runs.length}</p>\r\n                    <p className=\"text-sm text-gray-blue\">Weather: {session.weather.condition}, {session.weather.temp}°C</p>\r\n                    <div className=\"flex justify-between items-center mt-2\">\r\n                      <span className=\"text-gray-blue text-sm\">\r\n                        {session.runs.filter((run) => run.setup?.favorite).length} Favorite(s)\r\n                      </span>\r\n                      <div className=\"flex gap-2 flex-wrap\">\r\n                        <button\r\n                          onClick={() => setSelectedSession(session)}\r\n                          className=\"text-light-pink hover:text-bright-pink text-sm\"\r\n                        >\r\n                          View Runs\r\n                        </button>\r\n                        <button\r\n                          onClick={() => {\r\n                            setSelectedSession(session);\r\n                            openAddRunModal();\r\n                          }}\r\n                          className=\"text-light-pink hover:text-bright-pink text-sm\"\r\n                        >\r\n                          Add Run\r\n                        </button>\r\n                        {showDeleteSessionConfirm === session.id ? (\r\n                          <div className=\"flex gap-2\">\r\n                            <button\r\n                              onClick={() => deleteSession(session.id)}\r\n                              className=\"text-red-400 hover:text-red-300 text-sm\"\r\n                            >\r\n                              Yes\r\n                            </button>\r\n                            <button\r\n                              onClick={() => setShowDeleteSessionConfirm(null)}\r\n                              className=\"text-gray-blue hover:text-white text-sm\"\r\n                            >\r\n                              No\r\n                            </button>\r\n                          </div>\r\n                        ) : (\r\n                          <button\r\n                            onClick={() => setShowDeleteSessionConfirm(session.id)}\r\n                            className=\"text-red-400 hover:text-red-300 text-sm\"\r\n                          >\r\n                            Delete\r\n                          </button>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {/* Add Run Modal */}\r\n        {isModalOpen && selectedSession && (\r\n          <div className=\"fixed inset-0 bg-black/60 flex items-center justify-center p-4\">\r\n            <div className=\"w-full max-w-md bg-dark-blue rounded-lg p-6 max-h-[90vh] overflow-y-auto\">\r\n              <h2 className=\"text-xl font-bold mb-4\">\r\n                Add Run to {selectedSession.name || new Date(selectedSession.date).toLocaleDateString()}\r\n              </h2>\r\n              <div className=\"space-y-4\">\r\n                <div className=\"border-t border-light-pink/20 pt-4\">\r\n                  <h3 className=\"text-lg font-semibold mb-2\">New Run</h3>\r\n                  <div className=\"space-y-3\">\r\n                    <div>\r\n                      <label className=\"block text-gray-blue text-sm mb-1\">Best Lap (s)</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={runData.bestLap}\r\n                        onChange={(e) => setRunData({ ...runData, bestLap: e.target.value })}\r\n                        className=\"w-full p-3 rounded bg-dark-blue text-white border border-light-pink/20 focus:ring-2 focus:ring-light-pink outline-none\"\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-gray-blue text-sm mb-1\">Average Lap</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={runData.avgLap}\r\n                        onChange={(e) => setRunData({ ...runData, avgLap: e.target.value })}\r\n                        className=\"w-full p-3 rounded bg-dark-blue text-white border border-light-pink/20 focus:ring-2 focus:ring-light-pink outline-none\"\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-gray-blue text-sm mb-1\">\r\n                        5-Min Run (e.g., 23:5:04.2)\r\n                      </label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={runData.fiveMinuteStint}\r\n                        onChange={(e) => {\r\n                          let value = e.target.value.replace(/\\D/g, \"\");\r\n                          if (value.length > 7) value = value.slice(0, 7);\r\n                          if (value.length >= 7) {\r\n                            value = `${value.slice(0, 2)}:${value.slice(2, 3)}:${value.slice(3, 5)}.${value.slice(5, 6)}`;\r\n                          } else if (value.length >= 6) {\r\n                            value = `${value.slice(0, 2)}:${value.slice(2, 3)}:${value.slice(3, 5)}.${value.slice(5)}`;\r\n                          } else if (value.length >= 5) {\r\n                            value = `${value.slice(0, 2)}:${value.slice(2, 3)}:${value.slice(3, 5)}`;\r\n                          } else if (value.length >= 3) {\r\n                            value = `${value.slice(0, 2)}:${value.slice(2)}`;\r\n                          }\r\n                          setRunData({ ...runData, fiveMinuteStint: value });\r\n                        }}\r\n                        placeholder=\"23:5:04.2\"\r\n                        className=\"w-full p-3 rounded bg-dark-blue text-white border border-light-pink/20 focus:ring-2 focus:ring-light-pink outline-none\"\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-gray-blue text-sm mb-1\">Tires</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={runData.tires}\r\n                        onChange={(e) => setRunData({ ...runData, tires: e.target.value })}\r\n                        className=\"w-full p-3 rounded bg-dark-blue text-white border border-light-pink/20 focus:ring-2 focus:ring-light-pink outline-none\"\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-gray-blue text-sm mb-1\">Notes</label>\r\n                      <textarea\r\n                        value={runData.notes}\r\n                        onChange={(e) => setRunData({ ...runData, notes: e.target.value })}\r\n                        className=\"w-full p-3 rounded bg-dark-blue text-white border border-light-pink/20 focus:ring-2 focus:ring-light-pink outline-none\"\r\n                        rows={4}\r\n                      />\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={runData.favorite}\r\n                        onChange={(e) => setRunData({ ...runData, favorite: e.target.checked })}\r\n                        className=\"text-light-pink focus:ring-light-pink\"\r\n                      />\r\n                      <label className=\"text-gray-blue text-sm\">Favorite Setup</label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"mt-4 flex justify-end gap-2\">\r\n                <button onClick={addRun} className=\"bg-light-pink hover:bg-bright-pink text-dark-blue font-semibold py-2 px-4 rounded transition-colors\">\r\n                  Add Run\r\n                </button>\r\n                <button onClick={() => setIsModalOpen(false)} className=\"bg-deep-blue hover:bg-slate-blue text-white font-semibold py-2 px-4 rounded transition-colors\">\r\n                  Close\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* View Runs Modal */}\r\n        {selectedSession && !isModalOpen && (\r\n          <div className=\"fixed inset-0 bg-black/60 flex items-center justify-center p-4\">\r\n            <div className=\"w-full max-w-2xl bg-dark-blue rounded-lg p-6 max-h-[90vh] overflow-y-auto\">\r\n              <h2 className=\"text-xl font-bold mb-4\">\r\n                Runs for {selectedSession.name || new Date(selectedSession.date).toLocaleDateString()}\r\n              </h2>\r\n              <div className=\"space-y-4\">\r\n                {selectedSession.runs.length === 0 ? (\r\n                  <p className=\"text-gray-blue text-center\">No runs recorded yet.</p>\r\n                ) : (\r\n                  selectedSession.runs.map((run, index) => (\r\n                    <div key={index} className=\"p-3 bg-slate-blue/20 rounded flex flex-col sm:flex-row justify-between items-start gap-2\">\r\n                      <div>\r\n                        <p className=\"text-gray-blue text-sm\">Run {index + 1}</p>\r\n                        <p className=\"text-white text-sm\">Best Lap: {run.bestLap}s</p>\r\n                        <p className=\"text-white text-sm\">Avg Lap: {run.avgLap}s</p>\r\n                        {run.fiveMinuteStint && <p className=\"text-white text-sm\">5-Min Stint: {run.fiveMinuteStint}</p>}\r\n                        {run.setup && (\r\n                          <p className=\"text-white text-sm\">\r\n                            Tires: {run.setup.tires}\r\n                            {run.setup.favorite && <span className=\"text-light-pink\"> ★</span>}\r\n                          </p>\r\n                        )}\r\n                        {run.notes && <p className=\"text-gray-blue italic text-sm\">Notes: {run.notes}</p>}\r\n                      </div>\r\n                      <div className=\"flex gap-2 mt-2 sm:mt-0\">\r\n                        {showDeleteRunConfirm === index ? (\r\n                          <>\r\n                            <button\r\n                              onClick={() => deleteRun(index)}\r\n                              className=\"text-red-400 hover:text-red-300 text-sm\"\r\n                            >\r\n                              Yes\r\n                            </button>\r\n                            <button\r\n                              onClick={() => setShowDeleteRunConfirm(null)}\r\n                              className=\"text-gray-blue hover:text-white text-sm\"\r\n                            >\r\n                              No\r\n                            </button>\r\n                          </>\r\n                        ) : (\r\n                          <button\r\n                            onClick={() => setShowDeleteRunConfirm(index)}\r\n                            className=\"text-red-400 hover:text-red-300 text-sm\"\r\n                          >\r\n                            Delete\r\n                          </button>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                )}\r\n              </div>\r\n              <div className=\"mt-4 flex justify-end gap-2\">\r\n                <button\r\n                  onClick={openAddRunModal}\r\n                  className=\"bg-light-pink hover:bg-bright-pink text-dark-blue font-semibold py-2 px-4 rounded transition-colors\"\r\n                >\r\n                  Add New Run\r\n                </button>\r\n                <button\r\n                  onClick={() => setSelectedSession(null)}\r\n                  className=\"bg-deep-blue hover:bg-slate-blue text-white font-semibold py-2 px-4 rounded transition-colors\"\r\n                >\r\n                  Close\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Tutorial Modal */}\r\n        {showTutorial && (\r\n          <div className=\"fixed inset-0 bg-black/60 flex items-center justify-center p-4\">\r\n            <div className=\"w-full max-w-md bg-dark-blue rounded-lg p-6 shadow-lg\">\r\n              <h2 className=\"text-xl font-bold text-white mb-4\">Welcome to RC Testing Analyzer!</h2>\r\n              <p className=\"text-gray-blue mb-4\">Here’s a quick guide to get you started:</p>\r\n              <ul className=\"list-disc list-inside text-white space-y-2\">\r\n                <li>Create a track by entering a name and clicking \"Add Track\".</li>\r\n                <li>Select a track to view or add sessions.</li>\r\n                <li>Add a session with a name and weather data will auto-fetch.</li>\r\n                <li>Click \"View Runs\" on a session to see runs, or \"Add Run\" to log new ones.</li>\r\n                <li>Use the \"Logout\" button when you’re done.</li>\r\n              </ul>\r\n              <div className=\"mt-6 flex justify-end\">\r\n                <button\r\n                  onClick={() => setShowTutorial(false)}\r\n                  className=\"bg-light-pink hover:bg-bright-pink text-dark-blue font-semibold py-2 px-4 rounded transition-colors\"\r\n                >\r\n                  Got It!\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}